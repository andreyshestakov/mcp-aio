classes:
- system.linux.system.single
- system.linux.storage.loopback
- service.mysql.server.single
- system.mysql.client
- system.memcached.server.single
- system.rabbitmq.server.single
- cluster.virtual-mcp-allinone.openstack
parameters:
  _param:
    mysql_admin_user: root
    mysql_admin_password: workshop
    rabbitmq_secret_key: workshop
    rabbitmq_admin_password: workshop
    loopback_device_size: 10
    primary_interface: ens3
  linux:
    network:
      bridge: openvswitch
      interface:
        primary_int:
          enabled: true
          name: ${_param:primary_interface}
          proto: manual
          type: eth
        br-floating:
          enabled: true
          type: ovs_bridge
        float-to-br:
          enabled: true
          type: ovs_port
          bridge: br-floating
        br-single:
          enabled: true
          type: bridge
          proto: dhcp
          use_interfaces:
          - ${_param:primary_interface}
          use_ovs_ports:
          - float-to-br
  mysql:
    server:
      version: '5.6'
      max_connections: 20000
# override on this level
  nova:
    compute:
      cache:
        members:
        - host: 127.0.0.1
          port: 11211
  cinder:
    volume:
      cache:
        members:
        - host: 127.0.0.1
          port: 11211
  neutron:
    server:
      message_queue:
        members:
          - host: ${_param:single_address}
